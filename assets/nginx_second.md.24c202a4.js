import{_ as s,c as n,o as a,a as l}from"./app.e5c9c12c.js";const F=JSON.parse('{"title":"Nginx\u914D\u7F6E\u4E8C\u7EA7\u57DF\u540D","description":"","frontmatter":{"title":"Nginx\u914D\u7F6E\u4E8C\u7EA7\u57DF\u540D","date":"2019/7/13","categories":["nginx"],"tags":["\u5DE5\u5177"]},"headers":[{"level":2,"title":"1\u3001\u7533\u8BF7\u4E8C\u7EA7\u57DF\u540D","slug":"_1\u3001\u7533\u8BF7\u4E8C\u7EA7\u57DF\u540D"},{"level":2,"title":"2\u3001\u5B89\u88C5nginx","slug":"_2\u3001\u5B89\u88C5nginx"},{"level":2,"title":"3\u3001\u914D\u7F6E\u4E3B\u57DF\u540D","slug":"_3\u3001\u914D\u7F6E\u4E3B\u57DF\u540D"},{"level":2,"title":"4\u3001nginx\u914D\u7F6E\u5B50\u57DF\u540D","slug":"_4\u3001nginx\u914D\u7F6E\u5B50\u57DF\u540D"},{"level":2,"title":"5\u3001\u7ED9SPA\u9879\u76EE\u505A\u914D\u7F6E","slug":"_5\u3001\u7ED9spa\u9879\u76EE\u505A\u914D\u7F6E"}],"relativePath":"nginx/second.md","lastUpdated":1658075004000}'),p={name:"nginx/second.md"},o=l(`<p>\u7F51\u7EDC\u5E94\u7528\u4E2D\u7ECF\u5E38\u4F1A\u9047\u52301\u53F0\u670D\u52A1\u5668\u8D77\u591A\u4E2A\u5E94\u7528\u5728\u4E0D\u540C\u7AEF\u53E3\u7684\u60C5\u51B5</p><h2 id="_1\u3001\u7533\u8BF7\u4E8C\u7EA7\u57DF\u540D" tabindex="-1">1\u3001\u7533\u8BF7\u4E8C\u7EA7\u57DF\u540D <a class="header-anchor" href="#_1\u3001\u7533\u8BF7\u4E8C\u7EA7\u57DF\u540D" aria-hidden="true">#</a></h2><p>\u4ECE\u57DF\u540D\u670D\u52A1\u5546\u90A3\u91CC\uFF0C\u627E\u5230\u4E3B\u57DF\u540D\uFF0C\u70B9\u89E3\u6790\uFF0C\u7136\u540E\u8F93\u5165\u4E2A\u4E8C\u7EA7\u57DF\u540Dname\uFF0C\u6307\u5411\u670D\u52A1\u5668\uFF0C\u4E00\u822C\u6765\u8BF4\u4F1A\u81EA\u52A8\u5E2E\u4F60\u914D\u7F6EDNS</p><h2 id="_2\u3001\u5B89\u88C5nginx" tabindex="-1">2\u3001\u5B89\u88C5nginx <a class="header-anchor" href="#_2\u3001\u5B89\u88C5nginx" aria-hidden="true">#</a></h2><p>\u770B\u4E0A\u4E00\u7BC7</p><h2 id="_3\u3001\u914D\u7F6E\u4E3B\u57DF\u540D" tabindex="-1">3\u3001\u914D\u7F6E\u4E3B\u57DF\u540D <a class="header-anchor" href="#_3\u3001\u914D\u7F6E\u4E3B\u57DF\u540D" aria-hidden="true">#</a></h2><p>\u60F3\u914D\u7F6E\u4E8C\u7EA7\u57DF\u540D\u5C31\u5F97\u5148\u914D\u7F6E\u4E2A\u4E3B\u57DF\u540Dwww\uFF0C\u8BE6\u60C5\u53C2\u8003\u4E0A\u4E00\u7BC7</p><h2 id="_4\u3001nginx\u914D\u7F6E\u5B50\u57DF\u540D" tabindex="-1">4\u3001nginx\u914D\u7F6E\u5B50\u57DF\u540D <a class="header-anchor" href="#_4\u3001nginx\u914D\u7F6E\u5B50\u57DF\u540D" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># listen       80 default_server;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># listen       [::]:80 default_server;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> www.wulisensen.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">        /home/www/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;"> index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># try_files $uri /cache.php ;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># Load configuration files for the default server block.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># include /etc/nginx/default.d/*.conf;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;"> index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/manage </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;"> index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> error_page </span><span style="color:#A6ACCD;">404 /404.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/40x.html </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> error_page </span><span style="color:#A6ACCD;">500 </span><span style="color:#F78C6C;">502</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">503</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">504</span><span style="color:#A6ACCD;"> /50x.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/50x.html </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> wordpress.wulisensen.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">Host </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">host:8000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">X-Real-IP </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">X-Forwarded-For </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">      http://127.0.0.1:8000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u4E0A\u9762\u7684\u662F\u6211\u7684\u4E3B\u57DF\u540D\u914D\u7F6E\uFF0C\u4E0B\u9762\u662F\u4E8C\u7EA7\u57DF\u540D\u914D\u7F6E\u3002</p><p>\u6CE8\u610F <code>proxy_set_header Host $host:8000;</code> \u8981\u628A\u7AEF\u53E3\u53F7\u5E26\u4E0A\uFF0C<a href="http://xn--wordpress-kc6np6gmym539hxih.wulisensen.com" target="_blank" rel="noopener noreferrer">\u4E0D\u7136\u4F1A\u51FA\u73B0wordpress.wulisensen.com</a> \u88ABnginx 301 \u8F6C\u53D1\u5230 <a href="http://wordpress.wulisensen.com:8000" target="_blank" rel="noopener noreferrer">wordpress.wulisensen.com:8000</a> \u7684\u60C5\u51B5\uFF0C\u524D\u7AEF\u770B\u5230\u5C31\u5F88\u5C34\u5C2C\u4E86\u3002</p><h2 id="_5\u3001\u7ED9spa\u9879\u76EE\u505A\u914D\u7F6E" tabindex="-1">5\u3001\u7ED9SPA\u9879\u76EE\u505A\u914D\u7F6E <a class="header-anchor" href="#_5\u3001\u7ED9spa\u9879\u76EE\u505A\u914D\u7F6E" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> www.wulisensen.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#charset koi8-r;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> access_log </span><span style="color:#A6ACCD;"> /data/logs/nginx/localhost.access.log </span><span style="color:#89DDFF;"> main;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">        /home/www/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> try_files $</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ @router</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">#\u9700\u8981\u6307\u5411\u4E0B\u9762\u7684@router\u5426\u5219\u4F1A\u51FA\u73B0vue\u7684\u8DEF\u7531\u5728nginx\u4E2D\u5237\u65B0\u51FA\u73B0404</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;"> index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#\u5BF9\u5E94\u4E0A\u9762\u7684@router\uFF0C\u4E3B\u8981\u539F\u56E0\u662F\u8DEF\u7531\u7684\u8DEF\u5F84\u8D44\u6E90\u5E76\u4E0D\u662F\u4E00\u4E2A\u771F\u5B9E\u7684\u8DEF\u5F84\uFF0C\u6240\u4EE5\u65E0\u6CD5\u627E\u5230\u5177\u4F53\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#\u56E0\u6B64\u9700\u8981rewrite\u5230index.html\u4E2D\uFF0C\u7136\u540E\u4EA4\u7ED9\u8DEF\u7531\u5728\u5904\u7406\u8BF7\u6C42\u8D44\u6E90</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">@router </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^.*$</span><span style="color:#A6ACCD;"> /index.html</span><span style="color:#89DDFF;"> last;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div>`,13),e=[o];function t(c,r,C,A,D,y){return a(),n("div",null,e)}var d=s(p,[["render",t]]);export{F as __pageData,d as default};
