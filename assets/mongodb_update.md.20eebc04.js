import{_ as s,c as a,o as n,a as l}from"./app.e5c9c12c.js";const i=JSON.parse('{"title":"MongoDB\u66F4\u65B0\u6570\u636E","description":"","frontmatter":{"title":"MongoDB\u66F4\u65B0\u6570\u636E","categories":["mongodb"],"tags":["\u6570\u636E\u5E93"]},"headers":[{"level":3,"title":"\u6839\u636E 1 \u4E2A\u5B57\u6BB5\u66F4\u65B0\u53E6\u4E00\u4E2A\u5B57\u6BB5","slug":"\u6839\u636E-1-\u4E2A\u5B57\u6BB5\u66F4\u65B0\u53E6\u4E00\u4E2A\u5B57\u6BB5"}],"relativePath":"mongodb/update.md","lastUpdated":1657984394000}'),p={name:"mongodb/update.md"},o=l(`<div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">collection</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">query</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">update</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">     upsert: </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">boolean</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">     multi: </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">boolean</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">     writeConcern: </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">document</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   }</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u53C2\u6570\u8BF4\u660E\uFF1A</p><ul><li><p>query : update \u7684\u67E5\u8BE2\u6761\u4EF6\uFF0C\u7C7B\u4F3C sql update \u67E5\u8BE2\u5185 where \u540E\u9762\u7684\u3002</p></li><li><p>update : update \u7684\u5BF9\u8C61\u548C\u4E00\u4E9B\u66F4\u65B0\u7684\u64CD\u4F5C\u7B26\uFF08\u5982$,$inc...\uFF09\u7B49\uFF0C\u4E5F\u53EF\u4EE5\u7406\u89E3\u4E3A sql update \u67E5\u8BE2\u5185 set \u540E\u9762\u7684</p></li><li><p>upsert : \u53EF\u9009\uFF0C\u8FD9\u4E2A\u53C2\u6570\u7684\u610F\u601D\u662F\uFF0C\u5982\u679C\u4E0D\u5B58\u5728 update \u7684\u8BB0\u5F55\uFF0C\u662F\u5426\u63D2\u5165 objNew,true \u4E3A\u63D2\u5165\uFF0C\u9ED8\u8BA4\u662F false\uFF0C\u4E0D\u63D2\u5165\u3002</p></li><li><p>multi : \u53EF\u9009\uFF0Cmongodb \u9ED8\u8BA4\u662F false,\u53EA\u66F4\u65B0\u627E\u5230\u7684\u7B2C\u4E00\u6761\u8BB0\u5F55\uFF0C\u5982\u679C\u8FD9\u4E2A\u53C2\u6570\u4E3A true,\u5C31\u628A\u6309\u6761\u4EF6\u67E5\u51FA\u6765\u591A\u6761\u8BB0\u5F55\u5168\u90E8\u66F4\u65B0\u3002</p></li><li><p>writeConcern :\u53EF\u9009\uFF0C\u629B\u51FA\u5F02\u5E38\u7684\u7EA7\u522B</p></li></ul><p>\u5B9E\u9645\u4EE3\u7801\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCollection</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">article</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">import</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">script</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">province</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6CB3\u5357\u7701</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$set</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">del</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">updated_at </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2019-05-06 09:51:00</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">upsert</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">multi</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="\u6839\u636E-1-\u4E2A\u5B57\u6BB5\u66F4\u65B0\u53E6\u4E00\u4E2A\u5B57\u6BB5" tabindex="-1">\u6839\u636E 1 \u4E2A\u5B57\u6BB5\u66F4\u65B0\u53E6\u4E00\u4E2A\u5B57\u6BB5 <a class="header-anchor" href="#\u6839\u636E-1-\u4E2A\u5B57\u6BB5\u66F4\u65B0\u53E6\u4E00\u4E2A\u5B57\u6BB5" aria-hidden="true">#</a></h3><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCollection</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">userSet</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">setNumber</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$exists</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">}}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCollection</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">userSet</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_id</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">$set</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">setNumberNew</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">item</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">setNumber</span><span style="color:#89DDFF;">}},</span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div>`,7),e=[o];function t(c,r,D,F,y,A){return n(),a("div",null,e)}var d=s(p,[["render",t]]);export{i as __pageData,d as default};
