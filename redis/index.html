<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis操作文档 | WuLiSenSen</title>
    <meta name="description" content="WuLiSenSen的vitepress博客">
    <link rel="stylesheet" href="/assets/style.93fd7a8d.css">
    <link rel="modulepreload" href="/assets/app.e5c9c12c.js">
    <link rel="modulepreload" href="/assets/redis_index.md.dc21ede4.lean.js">
    
    <script src="/Valine.min.js"></script>
  <link rel="manifest" href="/pwa/manifest.json">
  <script>(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?188181cc3696b30069217bce726ffcfd";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-KTD9CBGV9Z"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KTD9CBGV9Z");</script>
  <script>navigator.serviceWorker&&location.href.indexOf("localhost")===-1&&navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker Registered. ",e)}).catch(e=>{console.log("ServiceWorker registration failed: ",e)});</script>
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-73094ece data-v-6b5fd0a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6b5fd0a9 data-v-0e356168><div class="VPNavBar has-sidebar" data-v-0e356168 data-v-8856f192><div class="container" data-v-8856f192><div class="VPNavBarTitle has-sidebar" data-v-8856f192 data-v-6a6f7ff6><a class="title" href="/" data-v-6a6f7ff6><!----><!--[-->WuLiSenSen<!--]--></a></div><div class="content" data-v-8856f192><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8856f192 data-v-a30758ee><span id="main-nav-aria-label" class="visually-hidden" data-v-a30758ee>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->前端<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/nginx/" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->服务端<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/git/" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->工具<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/mongodb/" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->数据库<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/python/" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->Python<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8856f192 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-8856f192 data-v-0562f5c0 data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8dccea88><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8dccea88><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8856f192 data-v-6f008456><span class="container" data-v-6f008456><span class="top" data-v-6f008456></span><span class="middle" data-v-6f008456></span><span class="bottom" data-v-6f008456></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-6b5fd0a9 data-v-92b0f14a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-92b0f14a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-92b0f14a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-92b0f14a>Menu</span></button><a class="top-link" href="#" data-v-92b0f14a> Return to top </a></div><aside class="VPSidebar" data-v-6b5fd0a9 data-v-55e4c7db><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-55e4c7db><span class="visually-hidden" id="sidebar-aria-label" data-v-55e4c7db> Sidebar Navigation </span><!--[--><div class="group" data-v-55e4c7db><section class="VPSidebarGroup" data-v-55e4c7db data-v-1f69a7ed><div class="title" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>MongoDB</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/mongodb/index.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>安装</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/init.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>初始化</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/first.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>$first获取指定字段</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/collation.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>字符串排序</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/good.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>查询优化</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/join.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>JOIN</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/object.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>对象数组查询</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/optimize.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>聚合优化</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/push.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>$push字段成数组</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/unwind.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>$unwind结构数组</span><!--]--><!----></a><a class="VPLink link" href="/mongodb/update.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>更新数据</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup" data-v-55e4c7db data-v-1f69a7ed><div class="title" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>MySQL</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/mysql/index.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>int类型bug解决</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup" data-v-55e4c7db data-v-1f69a7ed><div class="title" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>Redis</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/redis/index.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>操作文档</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6b5fd0a9 data-v-a4c57a06><div class="VPDoc has-sidebar" data-v-a4c57a06 data-v-79ca2460><div class="container" data-v-79ca2460><div class="aside" data-v-79ca2460><div class="aside-curtain" data-v-79ca2460></div><div class="aside-container" data-v-79ca2460><div class="aside-content" data-v-79ca2460><div class="VPDocAside" data-v-79ca2460 data-v-779d834d><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-779d834d data-v-51e5a8ce><div class="content" data-v-51e5a8ce><div class="outline-marker" data-v-51e5a8ce></div><div class="outline-title" data-v-51e5a8ce>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-51e5a8ce><span class="visually-hidden" id="doc-outline-aria-label" data-v-51e5a8ce> Table of Contents for current page </span><ul class="root" data-v-51e5a8ce><!--[--><li style="" data-v-51e5a8ce><a class="outline-link" href="#_1-存储结构" data-v-51e5a8ce>1 存储结构</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_2-内存存储持久化" data-v-51e5a8ce>2 内存存储持久化</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_3-功能" data-v-51e5a8ce>3 功能</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_4-redis-配置" data-v-51e5a8ce>4 Redis 配置</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_5-多数据库" data-v-51e5a8ce>5 多数据库</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_6-redis-支持事物" data-v-51e5a8ce>6 Redis 支持事物</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_7-redis-类型" data-v-51e5a8ce>7 Redis 类型</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#连接远程redis" data-v-51e5a8ce>连接远程redis</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-79ca2460><div class="content-container" data-v-79ca2460><!--[--><!--]--><main class="main" data-v-79ca2460><div style="position:relative;" class="vp-doc _redis_index" data-v-79ca2460><div><p>redis 数据类型讲解 以及 适合场景<a href="http://www.360doc.com/content/15/0324/16/5054188_457703414.shtml" target="_blank" rel="noopener noreferrer">http://www.360doc.com/content/15/0324/16/5054188_457703414.shtml</a></p><h2 id="_1-存储结构" tabindex="-1">1 存储结构 <a class="header-anchor" href="#_1-存储结构" aria-hidden="true">#</a></h2><p>Redis 是以字典的结构存储数据的, 通过键值对的方式进行存储(key=&gt;value) , 在储存类型中有5种 (1)字符串类型, (2)散列类型, (3)列表类型, (4)集合类型, (5)有序集合类型</p><h2 id="_2-内存存储持久化" tabindex="-1">2 内存存储持久化 <a class="header-anchor" href="#_2-内存存储持久化" aria-hidden="true">#</a></h2><p>Redis 可以在一秒内读写超过10万个键值, 并且Redis 可以为每个键值设置生存时间(生存时间到后键会被自动删除)</p><h2 id="_3-功能" tabindex="-1">3 功能 <a class="header-anchor" href="#_3-功能" aria-hidden="true">#</a></h2><p>Memcached 支持多线程, Redis是单线程模式, Redis支持服务器集群, Redis 可以限定数据占用最大的内存空间(如达到空间, 则可按照规则淘汰不需要的键) Redis的列表行键可用来实现队列, 并且支持阻塞式读取 <code>目前多数公司对Redis的应用以缓存和队列为主 Redis 支持事物 , 不支持回滚</code></p><h2 id="_4-redis-配置" tabindex="-1">4 Redis 配置 <a class="header-anchor" href="#_4-redis-配置" aria-hidden="true">#</a></h2><p>Redis</p><p>(1)可以通过配置文件来配置/path/to/redis.conf是否开启持久化, 日志级别等.</p><p>(2)也可通过配置文件的模板来配置redis.conf</p><p>(3)还可通过 CONFIG SET命令进行修改配置</p><h2 id="_5-多数据库" tabindex="-1">5 多数据库 <a class="header-anchor" href="#_5-多数据库" aria-hidden="true">#</a></h2><p>Redis 是以字典结构的存储服务器, redis默认支持16个数据库 从0开始递增 可以通过SELECT 1 来切换数据库, Redis数据库不支持自定义命名,数据库以编号命名(从0递增) Redis 不支持为每个数据库设置不同的访问密码</p><h2 id="_6-redis-支持事物" tabindex="-1">6 Redis 支持事物 <a class="header-anchor" href="#_6-redis-支持事物" aria-hidden="true">#</a></h2><h2 id="_7-redis-类型" tabindex="-1">7 Redis 类型 <a class="header-anchor" href="#_7-redis-类型" aria-hidden="true">#</a></h2><h3 id="_1-字符串类型-命令" tabindex="-1">1, 字符串类型 命令 : <a class="header-anchor" href="#_1-字符串类型-命令" aria-hidden="true">#</a></h3><p>赋值: SET chace_name xzq 取值: GET chace_name (return xzq) 递增数字: INCR chace_name (return 1 , 如当前值为整数,可以会自动递增 再次输入 INCR chace_name return = 2) 增加指定的整数 : INCRBY chace_name 2 (chace_name = 1 return 3 ) 递减数字 : DECR chace_name (chace_name = 2 return = 1 ) 减少指定的整数 : DECRBY chace_name 2 (chace_name = 3 reutrn 1) 增加指定的浮点数 : INCRBYFLOAT chace_name 2.7 增加指定的科学计数法: INCRBYFLOAT chace_name 5E+4 向尾部追加值 : APPEND chace_name &quot; word!&quot; (chace_name = hello return = &quot;hello word!&quot;) 获取字符串长度 : STRLEN chace_name (一个中文字符 占三个字节) 同时设置多个键值 : MSET key1 a key2 b key3 3 同时获取多个值 : MGET key1 key2 ( return = {2,3} ) 位操作 : 左移右移 (由于本人对左移 右移 迷糊 请参考相关文档) 总结: 字符串类型如果存储文章类信息 需要 先将文章序列化 之后在进行存储 , 存储比较简单.可以用来存储文章类信息(缺点: 如果我只想取出文章标题 , 那么需要将整个字符串取出 然后进行反序列化 )</p><h3 id="_2-散列类型-命令" tabindex="-1">2, 散列类型 命令 : <a class="header-anchor" href="#_2-散列类型-命令" aria-hidden="true">#</a></h3><p>赋值 : HSET chace_name zhangsan 20 赋值 : HSET chace_name lisi 30 取值 : HGET chace_name zhangsan ( return = 20 ) 同时设置多个值 : HMSET chace_name key1 v1 key2 v2 同时获取多个值 : HMGET chace_name key1 key2 ( return = {v1, v2} ) 获取所有键值 : HGETALL chace_name {return = {key1:v1, key2: v2} 返回值为对象 } 判断字段是否存在 : HEXISTS chace_name key1 (存在return = 1 , 不存在 return=0 ) 当字段不存在时赋值 : HSETNX chace_name key3 v3 (如: key3不存在 则赋值 , 如存在则不变) 增加数字 : CHINCRBY chace_name key1 15 (key1 = 10 return 25 返回结果为增长后的结果) 删除一个或多个字段 : HDEL chace_name key1 (return = 1 当键存在删除成功则返回值为1 当键不存在则返回值为0) 只获取字段名 : HKEYS chace_name ( return = {key1, key2} ) 只获取字段值 : HVALS chace_name ( return = {v1, v2 } )</p><p>总结 : 我个人认为 可以将散列类型当做一维数组 进行操作</p><div class="language-sql"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$chace_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> array(</span></span>
<span class="line"><span style="color:#A6ACCD;">    title </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">文章1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">time</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">20161117</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    content </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">内容.....</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre></div><h3 id="_3-列表类型-命令" tabindex="-1">3, 列表类型 命令 : <a class="header-anchor" href="#_3-列表类型-命令" aria-hidden="true">#</a></h3><p>向列表左侧增加元素 : LPUSH chace_name v1 向列表右侧增加元素 : RPUSH chace_name v1 列表左边弹出一个元素 : LPOP chace_name 列表左边弹出一个元素 : RPOP chace_name 获取列表中元素的个数 : LLEN chace_name ( 类似于 select count(*) from table_name ) 获得列表片段 : LRANGE chace_name 0 100 (return {v1, v2})(如果 参数100 大于实际范围 那么将会获取都最右边的元素) 删除列表中指定的值 : LREM chace_name -1 2 (删除从右边开始第一个值为2的元素) 获取列表指定索引的值 : LINDEX chace_name 0 (第0个索引值 , -1 最后一个索引值) 索引赋值 : LSET chace_name 1 lisi (为索引为1的 赋值为 lisi) 删除指定索引范围之外的元素 : LTRIM chace_name 0 2 (与 LRANGE 命令相似) LITRIM 此命令通常与LPUSH 联合使用 : 应用场景: 如 我只想保留最新的100条记录 LPUSH chace_name $log1 , LTRIM chace_name 0 99 向列表中差入元素 : LINSERT chace_name AFTER 2 zhangsan (会根据 第二个参数决定 是差入到 该元素的前边或后边 , AFTER / BEFORE ) 将元素从一个列表转入到另一个列表 : RPOPLPUSH chace_name chace_name2 (此命令会从 name1 最右边弹出一个 加入到name2 的左边)</p><div class="language-sql"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$chace_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> array(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> zhangsan</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> lisi</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> wangwu</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span></code></pre></div><h3 id="_4-无序集合类型-命令" tabindex="-1">4, 无序集合类型, 命令: <a class="header-anchor" href="#_4-无序集合类型-命令" aria-hidden="true">#</a></h3><p>应用场景: 目前观象台应用到权限列表中, 赋值: SADD chace_name string(a b) (如果 a 存在 那么将追加b) 删除: SREM chace_name string(a b c) 取值: SMEMBERS chace_name (获取集合中所有的元素) 验证: SISMEMBERS chace_name (判断一个元素是否在集合中, 是返回1, 否返回0 ) 集合间运算 两个参数取差集: SDIFF setA setB 此命令用于A-B 的差集 以A为主 A{1,2,3} B{2,3,4} A-B = {1} 多个参数取差集: SDIFF setA setB setC 此命令支持 多个参数取差集 (先计算A-B 在用结果 与C 取差集) 两个参数取交集: SINTER setA setB 此命令用于A 与 B的交集 多个参数取交集: SINTER setA setB setC 此命令支持多个参数取交集 两个参数取并集: SUNION setA setB 代表所有属于A 或属于B的元素构成的集合 A{1,2,3} B{2,3,4} = {1,2,3,4} 多个参数取并集: SUNION setA setB setC 此命令支持多个参数取并集 获取集合中元素的个数: SCARD chace_name (return 个数) 获取集合中的随机元素: SRANDMEMBER chace_name 随机弹出一个元素: SPOP chace_name 从列表左边弹出一个元素: LPOP chace_name 获取集合中指定个数随机元素: SRANDMEMBER chace_name 5(第二个参数为个数,正数(获取不重复的值,如个数大于元素总个数将获取所有 , -5(负数将会获取指定个数的元素, 会出现重复元素))) 总结: SADD命令 用来向集合增加一个或多个元素, 如果键不存在 则自动创建. (在一个集合中不能有相同的元素) 元素在redis 中存储格式为一维数组</p><h3 id="_5-有序集合-命令" tabindex="-1">5, 有序集合, 命令 : <a class="header-anchor" href="#_5-有序集合-命令" aria-hidden="true">#</a></h3><p>应用场景: 适用于文章访问量, 考试分数, 等等. 存储格式array(lisi,80,zs,90,xzq,100) 赋值: ZADD chace_name 80 lisi 90 zs 100 xzq (分数支持正数, 科学技术法, 双精度浮点数 17E+307 xzq , 10.8 xzq) 修改: ZADD chace_name 200 xzq 取值: ZSCORE chace_name xzq (return &#39;200&#39; ) 取值并携带分数: ZRANGE chace_name 0 -1 WITHSCORES (在末尾增加 WINTHSCORES 参数) (return {lisi:80 , zs:90 , xzq:100}) 取值并携带分数: ZREVRANGE chace_name 0 -1 WITHSCORES (return 结果 为从大到小返回结果的) 获取分数在某个范围元素列表 : ZRANGE chace_name 50 80 (return {zhangsan,lisi}) (索引是从0开始, -1从后向前查找) 跳跃性取值: ZRANGEBYSCORE chace_name 50 +inf limit 1 3 (获取分 数高于50分 并且从第二个人开始的, 从小到大开始排序) 增加元素分数: ZINCRBY chace_name 20 xzq (return 120 返回结果为 更改后的分数) (个人认为适用于点击量,访问量等) 减少元素分数: ZINCRBY chace_name -10 xzq (return 110 返回结果为更改后的分数) 其他命令: 获取有序集合中的个数: ZCARD chace_name 获取指定分数范围的元素个数 : ZCOUNT chace_name 80 100 删除一个或多个元素 : 按照排名范围删除元素 : 按照分数范围删除元素 : 计算有序集合的交集 : 总结 : 列表不能简单的条整某个元素的位置,而有序集合要比列表烈性更耗内存, 有序集合类型算是redis中最高级的类型了,有序集合为每一个元素都关联了一个分数, 虽然集合中每个元素都是不同的,但是他们的分数 却可以相同. 有序集合类型在某些方面与列表类型有些相似(具体区别查看相关文档)</p><p>flushall ——&gt; 清空整个 Redis 服务器的数据(删除所有数据库的所有 key ) flushdb ——&gt; 清空当前数据库中的所有 key</p><h3 id="_6-redis-任务队列" tabindex="-1">6, Redis 任务队列 <a class="header-anchor" href="#_6-redis-任务队列" aria-hidden="true">#</a></h3><h3 id="_1-什么是任务队列" tabindex="-1">1 , 什么是任务队列 : <a class="header-anchor" href="#_1-什么是任务队列" aria-hidden="true">#</a></h3><p>超市买东西 -&gt; 排队 -&gt; 结账</p><h3 id="_2-使用redis-实现任务队列" tabindex="-1">2 , 使用Redis 实现任务队列 <a class="header-anchor" href="#_2-使用redis-实现任务队列" aria-hidden="true">#</a></h3><p>实现简单的任务队列 : 可使用 LPUSH 和 RPOP</p><p>使用 python 实现任务队列</p><h2 id="连接远程redis" tabindex="-1">连接远程redis <a class="header-anchor" href="#连接远程redis" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">redis-cli -h 127.0.0.1 -p 6379 -a 123456</span></span>
<span class="line"></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-79ca2460 data-v-04568844><div class="edit-info" data-v-04568844><!----><div class="last-updated" data-v-04568844><p class="VPLastUpdated" data-v-04568844 data-v-0ce8c960>最后更新时间: <time datatime="2021-04-27T14:34:18.000Z" data-v-0ce8c960></time></p></div></div><div class="prev-next" data-v-04568844><div class="pager" data-v-04568844><!----></div><div class="pager" data-v-04568844><a class="pager-link next" href="/mongodb/index.html" data-v-04568844><span class="desc" data-v-04568844>Next page</span><span class="title" data-v-04568844>安装</span></a></div></div></footer><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"css_index.md\":\"472094ce\",\"git_branch.md\":\"84f8f0be\",\"git_ignore.md\":\"aefa1da0\",\"git_index.md\":\"9637120c\",\"git_pull.md\":\"86e78953\",\"git_remote.md\":\"23dfe011\",\"git_reset.md\":\"a3a63adc\",\"git_status.md\":\"ca8adab7\",\"git_tag.md\":\"91c9b2a0\",\"git_tips.md\":\"aa6a61db\",\"git_update.md\":\"527e8824\",\"gulp_index.md\":\"a3c510fe\",\"index.md\":\"0de4bfbd\",\"javascript_index.md\":\"e27407a5\",\"javascript_nvs.md\":\"1ced5f1f\",\"javascript_tyarn.md\":\"6ff6b367\",\"javascript_vuepagescss.md\":\"aba2fce6\",\"linux_docker.md\":\"3e08c7c2\",\"linux_index.md\":\"3a802148\",\"linux_move.md\":\"2b24be25\",\"mini-app_index.md\":\"2bb5f358\",\"mongodb_collation.md\":\"7a7d79f4\",\"mongodb_example.md\":\"79273cd2\",\"mongodb_first.md\":\"3e5bc9de\",\"mongodb_good.md\":\"237e2ad5\",\"mongodb_index.md\":\"73a385ae\",\"mongodb_init.md\":\"6778dbb5\",\"mongodb_join.md\":\"76beadc7\",\"mongodb_object.md\":\"d57f501c\",\"mongodb_optimize.md\":\"b2a219f0\",\"mongodb_push.md\":\"ed3bae57\",\"mongodb_unwind.md\":\"59c02ec2\",\"mongodb_update.md\":\"20eebc04\",\"mysql_index.md\":\"55c74b75\",\"nginx_https.md\":\"2bc27c45\",\"nginx_index.md\":\"21bdc0d6\",\"nginx_second.md\":\"24c202a4\",\"python_index.md\":\"25d36b9c\",\"redis_index.md\":\"dc21ede4\",\"yarn_tyarn.md\":\"4bc1138b\"}")</script>
    <script type="module" async src="/assets/app.e5c9c12c.js"></script>
    
  </body>
</html>